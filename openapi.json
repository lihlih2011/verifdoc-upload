{"openapi":"3.1.0","info":{"title":"VerifDoc Backend","description":"Forensic AI Document Analysis Platform","version":"1.0.0"},"paths":{"/api/vision/analyze":{"post":{"tags":["forensic"],"summary":"Analyze Document","operationId":"analyze_document_api_vision_analyze_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_analyze_document_api_vision_analyze_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/history/analysis/list":{"get":{"tags":["analysis_history"],"summary":"List Analysis Records","operationId":"list_analysis_records_api_history_analysis_list_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Response List Analysis Records Api History Analysis List Get"}}}}}}},"/api/history/analysis/{record_id}":{"get":{"tags":["analysis_history"],"summary":"Get Analysis Detail","operationId":"get_analysis_detail_api_history_analysis__record_id__get","parameters":[{"name":"record_id","in":"path","required":true,"schema":{"type":"integer","title":"Record Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get Analysis Detail Api History Analysis  Record Id  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/report/report/analysis/{record_id}":{"get":{"tags":["report"],"summary":"Get Analysis Report","operationId":"get_analysis_report_api_report_report_analysis__record_id__get","parameters":[{"name":"record_id","in":"path","required":true,"schema":{"type":"integer","title":"Record Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/verify/verify/{record_id}":{"get":{"tags":["integrity_verification"],"summary":"Verify Report Integrity","operationId":"verify_report_integrity_api_verify_verify__record_id__get","parameters":[{"name":"record_id","in":"path","required":true,"schema":{"type":"integer","title":"Record Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/signature/signature/analyze":{"post":{"tags":["digital_signature"],"summary":"Analyze Signature","description":"Analyzes a PDF file for digital signatures and returns detailed information.","operationId":"analyze_signature_api_signature_signature_analyze_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_analyze_signature_api_signature_signature_analyze_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/auth/register":{"post":{"tags":["auth"],"summary":"Register","operationId":"register_api_auth_register_post","parameters":[{"name":"email","in":"query","required":true,"schema":{"type":"string","title":"Email"}},{"name":"password","in":"query","required":true,"schema":{"type":"string","title":"Password"}},{"name":"full_name","in":"query","required":false,"schema":{"type":"string","title":"Full Name"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/auth/token":{"post":{"tags":["auth"],"summary":"Login For Access Token","operationId":"login_for_access_token_api_auth_token_post","requestBody":{"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Body_login_for_access_token_api_auth_token_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/billing/balance":{"get":{"tags":["billing"],"summary":"Get Balance","operationId":"get_balance_api_billing_balance_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/billing/purchase-pack":{"post":{"tags":["billing"],"summary":"Purchase Pack","description":"Purchase a specific credit pack.\nPACKS:\n- starter: 149€ -> 150 Credits\n- pro: 249€ -> 500 Credits\n- business: 499€ -> 1500 Credits","operationId":"purchase_pack_api_billing_purchase_pack_post","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"pack_id","in":"query","required":true,"schema":{"type":"string","title":"Pack Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/billing/simulate-deposit":{"post":{"tags":["billing"],"summary":"Simulate Stripe Payment","description":"Mock endpoint for Stripe Payment. Adds credits.","operationId":"simulate_stripe_payment_api_billing_simulate_deposit_post","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"amount","in":"query","required":true,"schema":{"type":"integer","title":"Amount"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/billing/history":{"get":{"tags":["billing"],"summary":"Get Transaction History","operationId":"get_transaction_history_api_billing_history_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/admin/users":{"get":{"tags":["admin"],"summary":"List Users","description":"List all users (Team Management).","operationId":"list_users_api_admin_users_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/admin/users/{user_id}/role":{"put":{"tags":["admin"],"summary":"Update User Role","description":"RBAC: Change a user's role (admin, agent, viewer).","operationId":"update_user_role_api_admin_users__user_id__role_put","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"integer","title":"User Id"}},{"name":"new_role","in":"query","required":true,"schema":{"type":"string","title":"New Role"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/users/{user_id}/status":{"put":{"tags":["admin"],"summary":"Update User Status","description":"Security: Ban or Activate a user.","operationId":"update_user_status_api_admin_users__user_id__status_put","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"integer","title":"User Id"}},{"name":"is_active","in":"query","required":true,"schema":{"type":"boolean","title":"Is Active"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/audit-logs":{"get":{"tags":["admin"],"summary":"View Audit Logs","description":"Legal Shield: View strict audit logs of who did what.","operationId":"view_audit_logs_api_admin_audit_logs_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/support/tickets":{"post":{"tags":["support"],"summary":"Create Ticket","operationId":"create_ticket_api_support_tickets_post","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"subject","in":"query","required":true,"schema":{"type":"string","title":"Subject"}},{"name":"message","in":"query","required":true,"schema":{"type":"string","title":"Message"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["support"],"summary":"List My Tickets","operationId":"list_my_tickets_api_support_tickets_get","security":[{"OAuth2PasswordBearer":[]}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/developer/api-keys":{"post":{"tags":["developer"],"summary":"Generate Api Key","description":"Generate a new sk_live_... key.\nWe show it ONCE, then store only the hash.","operationId":"generate_api_key_api_developer_api_keys_post","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"name","in":"query","required":true,"schema":{"type":"string","title":"Name"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["developer"],"summary":"List Api Keys","operationId":"list_api_keys_api_developer_api_keys_get","security":[{"OAuth2PasswordBearer":[]}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/":{"get":{"summary":"Read Root","operationId":"read_root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/health":{"get":{"summary":"Health Check","description":"Health check endpoint to verify the backend is running.","operationId":"health_check_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"Body_analyze_document_api_vision_analyze_post":{"properties":{"file":{"type":"string","format":"binary","title":"File"}},"type":"object","required":["file"],"title":"Body_analyze_document_api_vision_analyze_post"},"Body_analyze_signature_api_signature_signature_analyze_post":{"properties":{"file":{"type":"string","format":"binary","title":"File"}},"type":"object","required":["file"],"title":"Body_analyze_signature_api_signature_signature_analyze_post"},"Body_login_for_access_token_api_auth_token_post":{"properties":{"grant_type":{"anyOf":[{"type":"string","pattern":"^password$"},{"type":"null"}],"title":"Grant Type"},"username":{"type":"string","title":"Username"},"password":{"type":"string","format":"password","title":"Password"},"scope":{"type":"string","title":"Scope","default":""},"client_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Id"},"client_secret":{"anyOf":[{"type":"string"},{"type":"null"}],"format":"password","title":"Client Secret"}},"type":"object","required":["username","password"],"title":"Body_login_for_access_token_api_auth_token_post"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}},"securitySchemes":{"OAuth2PasswordBearer":{"type":"oauth2","flows":{"password":{"scopes":{},"tokenUrl":"auth/token"}}}}}}